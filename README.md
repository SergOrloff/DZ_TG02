# Проект "Тестирование приложения с использованием PyTest"


## Описание проекта

Этот проект представляет собой пример тестирования Python-приложения с использованием библиотеки PyTest. Приложение включает функции для работы с базой данных пользователей и подсчета гласных и согласных в строках.

## Содержание

1. [main.py](#mainpy)
2. [test.py](#testpy)
3. [Установка и запуск тестов](#установка-и-запуск-тестов)

## main.py

Файл `main.py` содержит следующие функции:

- `init_db()`: Инициализирует подключение к базе данных. Возвращает объект соединения.
- `add_user(conn, name, age)`: Добавляет пользователя с именем `name` и возрастом `age` в базу данных, используя соединение `conn`.
- `get_user(conn, name)`: Получает информацию о пользователе с именем `name` из базы данных. Возвращает кортеж `(id, name, age)`.
- `count_vowels_and_consonants(input_str)`: Подсчитывает количество гласных и согласных букв в строке `input_str`. Возвращает кортеж `(num_vowels, num_consonants)`.

## test.py

Файл `test.py` содержит тесты для функций из `main.py`, реализованные с использованием библиотеки PyTest.

### Тестирование базы данных пользователей:

- **Фикстура `db_conn`**: Создает и закрывает соединение с базой данных для каждого теста.
  
- **Тест `test_add_or_get_user`**: Проверяет добавление и получение пользователя из базы данных.

- **Тест `test_add_multiple_users`**: Проверяет добавление нескольких пользователей с использованием параметризации.

### Тестирование функции подсчета гласных и согласных:

- **Тест `test_all_vowels`**: Проверяет строку, состоящую только из гласных.

- **Тест `test_no_vowels`**: Проверяет строку, состоящую только из согласных.

- **Тест `test_mixed_string`**: Проверяет строку, содержащую смесь гласных и согласных.

- **Тест `test_mixed_string_mistake`**: Проверяет строку, содержащую смесь гласных и согласных (в целях демонстрации работы функции тестирования введена намеренно ошибка).

- **Тест `test_count_vowels_and_consonants_parametrized`**: Использует параметризацию для проверки различных строк на количество гласных и согласных.

### Логирование

В `test.py` настроено логирование, которое записывает информацию о начале и окончании каждого теста в файл `Pytest.log`.

## Установка и запуск

1. Убедитесь, что у вас установлен Python и PyTest.

2. Клонируйте репозиторий проекта:

   ```bash
   git clone <URL репозитория>
   cd <название директории>
   ```

3. Запустите тесты с помощью команды:

   ```bash
   pytest test.py
   ```

## Заключение

Этот проект демонстрирует, как использовать PyTest для тестирования функций, работающих с базой данных и строками. Он также показывает, как настраивать логирование для отслеживания выполнения тестов.